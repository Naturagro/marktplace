<?xml version="1.0" encoding="UTF-8"?>
<entity-mappings version="2.1" xmlns="http://xmlns.jcp.org/xml/ns/persistence/orm" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://xmlns.jcp.org/xml/ns/persistence/orm http://xmlns.jcp.org/xml/ns/persistence/orm_2_1.xsd">

    <!--Queries for Produto -->
    <named-query name="Produto.buscarPertoVencimento">
        <query>SELECT p FROM Produto p WHERE p.dataVencimento BETWEEN :hoje AND :limite</query>
    </named-query>

    <named-query name="Produto.buscarEstoqueBaixo">
        <query>SELECT p FROM Produto p WHERE p.quantidadeEmEstoque > :quantidade</query>
    </named-query>

    <named-query name="Produto.buscarPorNome">
        <query>SELECT p FROM Produto p WHERE LOWER(p.nome) LIKE LOWER(:nome)</query>
    </named-query>
    <named-query name="Produto.buscarPorCategoria">
        <query>SELECT distinct p FROM Produto p WHERE p.categoria = :categoria</query>
    </named-query>
    <named-query name="Produto.buscarPorFaixaDePreco">
        <query>SELECT p FROM Produto p WHERE p.precoVarejo BETWEEN :precoMin AND :precoMax</query>
    </named-query>

    <!-- Queries para Funcionario -->
    <named-query name="Funcionario.buscarPorCpf">
        <query>SELECT f FROM Funcionario f WHERE f.cpf = :cpf</query>
    </named-query>

    <named-query name="Funcionario.buscarPorNome">
        <query>SELECT f FROM Funcionario f WHERE LOWER(f.nome) LIKE LOWER(:nome)</query>
    </named-query>

    <named-query name="Funcionario.buscarTodos">
        <query>SELECT f FROM Funcionario f</query>
    </named-query>

    <!--Queris for Venda -->
    <named-query name="Venda.ocorrenciaProdutoPorVenda">
        <query>SELECT v.produtos_id, COUNT(v.produtos_id) AS ocorrencia FROM Venda_Produto v WHERE v.vendas_id = :id GROUP BY v.produtos_id</query>
    </named-query>



</entity-mappings>
